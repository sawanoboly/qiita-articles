

<blockquote>
<p><strong>この記事は最終更新から1年以上経過しています。</strong> 気をつけてね。</p>
</blockquote>

<p>Capistranoでプロジェクトが複数になってくるとNamespaceの使い回しが多くなる。<br>
loadメソッドで外部からレシピを取り込める。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>.
├── proj_a
│   └── config
│       ├── deploy
│       │   ├── production.rb
│       │   └── staging.rb
│       └── deploy.rb
├── proj_b
│   └── config
│       └── deploy
├── lib
    └── echo.rb
</pre></div></div>

<p>libあたりに共通化したいレシピのecho.rbを置いてみる。</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">echo.rb</span></div>
<div class="highlight"><pre><span class="n">namespace</span> <span class="ss">:hello</span> <span class="k">do</span>
  <span class="n">task</span> <span class="ss">:world</span> <span class="k">do</span>
    <span class="nb">puts</span> <span class="s2">"good night."</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>

<p>そしたら<code>deploy.rb</code>内でloadする。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>load '../lib/echo'
</pre></div></div>
